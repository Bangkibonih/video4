<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Prompt Builder</title>
    <style>
        /* --- TEMA RAIN CLOUD (SAMA SEPERTI SEBELUMNYA) --- */
        :root {
            --bg-deep: #1e293b;
            --bg-card: #334155;
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
            --accent: #a5b4fc;
            --accent-glow: rgba(165, 180, 252, 0.4);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
            display: flex; justify-content: center;
            min-height: 100vh; padding-bottom: 140px;
        }

        /* Scrollbar Halus */
        ::-webkit-scrollbar { height: 0px; width: 0px; } /* Hidden scrollbar aesthetic */

        .container {
            width: 100%; max-width: 600px; padding: 20px;
            display: flex; flex-direction: column; gap: 25px;
        }

        /* PROFILE */
        .profile-section {
            display: flex; flex-direction: column; align-items: center; text-align: center;
            padding: 30px; background: rgba(51, 65, 85, 0.3);
            border-radius: 24px; border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
        }
        .avatar-box {
            width: 100px; height: 100px; border-radius: 50%; padding: 3px;
            background: linear-gradient(45deg, #64748b, #a5b4fc); margin-bottom: 15px;
        }
        .avatar-box img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 3px solid var(--bg-deep); }
        .user-name { font-size: 1.4rem; font-weight: 800; color: var(--text-main); }

        /* SCROLL AREA */
        .step-title {
            font-size: 0.9rem; font-weight: 700; color: var(--accent);
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; margin-left: 5px;
        }

        .scroll-wrapper {
            display: flex; overflow-x: auto; gap: 12px; padding: 4px; scroll-behavior: smooth;
        }

        /* KARTU PILIHAN */
        .option-card {
            min-width: 125px; width: 125px;
            background: var(--bg-card); border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.05); overflow: hidden;
            cursor: pointer; transition: all 0.3s ease;
        }
        .option-card:hover { transform: translateY(-3px); background: #475569; }
        .option-card.active {
            border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); background: #3e4c66;
        }

        .card-img { height: 85px; background: #252f42; display: flex; align-items: center; justify-content: center; }
        .card-img img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; }
        .card-info { padding: 8px; text-align: center; }
        .prompt-en { font-size: 0.75rem; font-weight: 700; display: block; line-height: 1.2; }

        /* INPUT MANUAL BARU (CUSTOM) */
        .custom-input-box {
            width: 100%;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 12px 15px;
            border-radius: 12px;
            margin-top: 12px;
            font-family: inherit;
            font-size: 0.9rem;
            outline: none;
            transition: 0.3s;
        }
        .custom-input-box:focus {
            border-color: var(--accent);
            background: rgba(0, 0, 0, 0.4);
        }
        .custom-input-box::placeholder { color: rgba(255,255,255,0.3); }

        /* FOOTER */
        .result-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 580px;
            background: rgba(30, 41, 59, 0.9); backdrop-filter: blur(15px);
            padding: 15px; border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            z-index: 100; display: flex; flex-direction: column; gap: 10px;
        }
        textarea {
            background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);
            color: var(--accent); width: 100%; height: 60px; border-radius: 12px;
            padding: 10px; resize: none; font-size: 0.85rem; outline: none; font-family: monospace;
        }
        .copy-btn {
            background: var(--text-main); color: var(--bg-deep); border: none;
            padding: 12px; border-radius: 12px; font-weight: 800; cursor: pointer; text-transform: uppercase;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="profile-section">
        <div class="avatar-box"><img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=200&q=80" alt="Avatar"></div>
        <div class="user-name">Prompt Architect</div>
        <div class="user-role">Manual & Auto Builder</div>
    </div>
    
    <div id="app-content"></div>
</div>

<div class="result-bar">
    <textarea id="final-prompt" readonly placeholder="Result..."></textarea>
    <button class="copy-btn" onclick="copyText()">Copy Prompt</button>
</div>

<script>
    // DATABASE: Saya tambahkan properti 'custom: true' di OUTFIT & ENVIRONMENT
    const db = [
        { title: "1. Ras & Etnis", options: [{en:"Scandinavian"}, {en:"East Asian"}, {en:"African"}, {en:"Latina"}, {en:"Southeast Asian"}] },
        { title: "2. Tipe Tubuh", options: [{en:"Skinny"}, {en:"Athletic"}, {en:"Muscular"}, {en:"Curvy"}, {en:"Plus Size"}] },
        { title: "3. Tekstur Rambut", options: [{en:"Straight hair"}, {en:"Wavy hair"}, {en:"Curly hair"}, {en:"Afro"}, {en:"Braids"}, {en:"Pixie cut"}] },
        { title: "4. Warna Rambut", options: [{en:"Platinum Blonde"}, {en:"Jet Black"}, {en:"Redhead"}, {en:"Pastel Pink"}, {en:"Silver Grey"}] },
        { title: "5. Detail Kulit", options: [{en:"Visible pores"}, {en:"Freckles"}, {en:"Acne scars"}, {en:"Wrinkles"}, {en:"Oily skin"}] },
        { title: "6. Ekspresi", options: [{en:"Dilated pupils"}, {en:"Smirk"}, {en:"Looking at camera"}, {en:"Thousand-yard stare"}] },
        
        // --- OUTFIT (ADA INPUT MANUAL) ---
        { 
            title: "7. Outfit (Pakaian)", 
            custom: true, // INI KUNCINYA
            options: [
                {en:"White T-shirt"}, {en:"Oversized Hoodie"}, {en:"Summer Dress"}, 
                {en:"Techwear Jacket"}, {en:"Evening Gown"}, {en:"Tuxedo"}, 
                {en:"Cyberpunk Jacket"}, {en:"School Uniform"}, {en:"Space Suit"}
            ] 
        },

        { title: "8. Bahan Kain", options: [{en:"Cotton"}, {en:"Silk Satin"}, {en:"Denim"}, {en:"Leather"}, {en:"Latex"}, {en:"Wool"}] },
        { title: "9. Kondisi Pakaian", options: [{en:"Ironed"}, {en:"Wrinkled"}, {en:"Wet"}, {en:"Dirty"}, {en:"Windblown"}] },
        
        // --- ENVIRONMENT (ADA INPUT MANUAL) ---
        { 
            title: "10. Environment (Lokasi)", 
            custom: true, // INI KUNCINYA
            options: [
                {en:"Tokyo Street Night"}, {en:"Coffee Shop"}, {en:"White Studio"}, 
                {en:"Mystical Forest"}, {en:"Luxury Penthouse"}, {en:"Abandoned Building"}
            ] 
        },

        { title: "11. Cuaca", options: [{en:"Sunny"}, {en:"Rainy"}, {en:"Foggy"}, {en:"Snowing"}] },
        { title: "12. Kamera", options: [{en:"iPhone 17"}, {en:"Sony A7R"}, {en:"Fuji GFX"}, {en:"Polaroid"}, {en:"GoPro"}, {en:"CCTV"}] },
        { title: "13. Lensa", options: [{en:"Macro"}, {en:"16mm Wide"}, {en:"35mm"}, {en:"50mm"}, {en:"85mm"}, {en:"200mm"}] },
        { title: "14. Film Stock", options: [{en:"Kodak Portra 400"}, {en:"Kodak Gold"}, {en:"Fuji Velvia"}, {en:"Ilford B&W"}, {en:"VHS Glitch"}] },
        { title: "15. Angle", options: [{en:"Eye-level"}, {en:"Low angle"}, {en:"High angle"}, {en:"Dutch angle"}, {en:"Selfie"}] },
        { title: "16. Framing", options: [{en:"Extreme Close-up"}, {en:"Close-up"}, {en:"Medium shot"}, {en:"Full body"}, {en:"Wide shot"}] },
        { title: "17. Pencahayaan", options: [{en:"Golden Hour"}, {en:"Blue Hour"}, {en:"Midday Sun"}, {en:"Overcast"}, {en:"Moonlight"}] },
        { title: "18. Studio Light", options: [{en:"Rembrandt"}, {en:"Butterfly"}, {en:"Rim Light"}, {en:"Silhouette"}, {en:"Neon"}, {en:"God Rays"}] },
        { title: "19. Ratio", options: [{en:"--ar 9:16"}, {en:"--ar 4:5"}, {en:"--ar 1:1"}, {en:"--ar 16:9"}] },
        { title: "20. Booster", options: [{en:"Photorealistic"}, {en:"8K Detailed"}, {en:"Raw Candid"}, {en:"Cinematic"}] }
    ];

    let userSelections = new Array(db.length).fill("");

    function renderApp() {
        const app = document.getElementById('app-content');
        
        db.forEach((section, index) => {
            const stepDiv = document.createElement('div');
            stepDiv.className = 'step-container';

            // Judul
            const title = document.createElement('div');
            title.className = 'step-title';
            title.innerText = section.title;
            stepDiv.appendChild(title);

            // Container Scroll
            const scrollWrapper = document.createElement('div');
            scrollWrapper.className = 'scroll-wrapper';
            scrollWrapper.id = `group-${index}`;

            section.options.forEach(opt => {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.onclick = () => selectCard(index, opt.en, card);
                
                // Placeholder Image
                const imgUrl = `https://via.placeholder.com/150/334155/a5b4fc?text=${opt.en.split(' ')[0]}`;
                
                card.innerHTML = `
                    <div class="card-img"><img src="${imgUrl}" alt="img"></div>
                    <div class="card-info"><span class="prompt-en">${opt.en}</span></div>
                `;
                scrollWrapper.appendChild(card);
            });
            stepDiv.appendChild(scrollWrapper);

            // --- LOGIKA INPUT MANUAL (CUSTOM) ---
            if(section.custom) {
                const input = document.createElement('input');
                input.type = "text";
                input.className = "custom-input-box";
                input.placeholder = `Atau ketik deskripsi manual di sini...`;
                input.id = `input-${index}`;
                // Saat ngetik, matikan kartu
                input.oninput = (e) => handleTyping(index, e.target.value);
                stepDiv.appendChild(input);
            }

            app.appendChild(stepDiv);
        });
    }

    // Fungsi saat Kartu di-klik
    function selectCard(index, value, cardElement) {
        // 1. Reset kartu lain
        const group = document.getElementById(`group-${index}`);
        for (let c of group.children) c.classList.remove('active');
        
        // 2. Aktifkan kartu ini
        cardElement.classList.add('active');

        // 3. Reset Input Manual (kalau ada)
        const manualInput = document.getElementById(`input-${index}`);
        if(manualInput) manualInput.value = ""; 

        // 4. Update Data
        userSelections[index] = value;
        generatePrompt();
    }

    // Fungsi saat Ngetik Manual
    function handleTyping(index, textValue) {
        // 1. Reset semua kartu (deselect)
        const group = document.getElementById(`group-${index}`);
        for (let c of group.children) c.classList.remove('active');

        // 2. Update Data dengan Teks Manual
        userSelections[index] = textValue;
        generatePrompt();
    }

    function generatePrompt() {
        const cleanParts = userSelections.filter(item => item !== "");
        let finalString = cleanParts.join(", ");
        if (finalString) finalString += " --v 6.0 --style raw";
        document.getElementById('final-prompt').value = finalString;
    }

    function copyText() {
        const txt = document.getElementById('final-prompt');
        if (!txt.value) return;
        txt.select();
        document.execCommand('copy');
        alert("Copied!");
    }

    renderApp();
</script>

</body>
</html>
